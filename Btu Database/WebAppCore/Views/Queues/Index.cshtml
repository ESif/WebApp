@model IEnumerable<WebAppCore.Models.Batch>

@{
    ViewData["Title"] = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="panel panel-defualt">
    <div class="panel-body">
        <form method="get" accept-charset="utf-8" class="form" role="form">
            <div class="col-lg-6">
                <div class="input-group">
                    <input type="text" class="form-control" aria-label="..." name="SearchString">
                    <div class="input-group-btn">
                        <button asp-action="Index" class="btn btn-default" type="submit">Search</button>
                    </div>
                </div>
            </div>
            <div class="col-lg-6">
                <div class="btn-group" data-toggle="buttons">
                    <label class="btn btn-primary active">
                        @Html.RadioButton("options", "BatchId", new { @checked = "checked" }) <span>Batch ID</span>
                    </label>
                    <label class="btn btn-primary">
                        @Html.RadioButton("options", "BatchName") <span>Batch Name</span>
                    </label>
                    <label class="btn btn-primary">
                        @Html.RadioButton("options", "Sim") <span>Simulator</span>
                    </label>
                    <label class="btn btn-primary">
                        @Html.RadioButton("options", "Ecu") <span>ECU</span>
                    </label>
                    <label class="btn btn-primary">
                        @Html.RadioButton("options", "Tester") <span>Tester</span>
                    </label>
                </div>
            </div>
        </form>
    </div>
</div>

<div class="panel panel-default">
    <div class="panel-heading">
        <h3 class="panel-title">Filters</h3>
    </div>
    <div class="panel-body">
        <div class="col-lg-3">
            Simulator
            <div class="input-group">
                <input type="text" class="form-control" aria-label="...">
                <div class="input-group-btn">
                    <button type="button" class="btn btn-default">Apply</button>
                </div>
            </div>
        </div>
        <div class="col-lg-3">
            ECU
            <div class="input-group">
                <input type="text" class="form-control" aria-label="...">
                <div class="input-group-btn">
                    <button type="button" class="btn btn-default">Apply</button>
                </div>
            </div>
        </div>
        <div class="col-lg-3">
            Tester
            <div class="input-group">
                <input type="text" class="form-control" aria-label="...">
                <div class="input-group-btn">
                    <button type="button" class="btn btn-default">Apply</button>
                </div>
            </div>
        </div>
        <div class="col-lg-3">
            <div>Status</div>
            <div class="btn-group" data-toggle="buttons">
                <label class="btn btn-primary active">
                    <input type="checkbox" name="options" id="option1" autocomplete="off" checked> Queued
                </label>
                <label class="btn btn-primary">
                    <input type="checkbox" name="options" id="option1" autocomplete="off" checked> Running
                </label>
                <label class="btn btn-primary">
                    <input type="checkbox" name="options" id="option2" autocomplete="off"> Completed
                </label>
            </div>
        </div>
    </div>
</div>

<div class="panel panel-default">
    <!-- Default panel contents -->
    <div class="panel-heading">Filtered Queue</div>

    <!-- Table -->
    <form method="post" accept-charset="utf-8" class="form" role="form">
        <table class="table table-striped">
            <thead>
                <tr>
                    <th>Batch ID</th>
                    <th>Batch Name</th>
                    <th>Simulator</th>
                    <th>ECU</th>
                    <th>Tester</th>
                    <th>Status</th>
                    <th></th>
                </tr>
            </thead>
            <tbody>
                @foreach (var item in Model){
                    if (item.Display == 1)
                    {
                        if (item.Status == "Queued")
                        {@Html.Raw("<tr class='warning'>")}
                        else if (item.Status == "Running")
                        {@Html.Raw("<tr class='success'>")}
                        else if (item.Status == "Complete")
                        {@Html.Raw("<tr class='info'>")}

                            <td>@Html.DisplayFor(modelItem => item.BatchId) </td>
                            <td>@Html.DisplayFor(modelItem => item.Name)</td>
                            <td>@Html.DisplayFor(modelItem => item.SimId)</td>
                            <td>@Html.DisplayFor(modelItem => item.Sim.Ecu.EcuModel)</td>
                            <td>@Html.DisplayFor(modelItem => item.TesterUser.FirstName) @Html.DisplayFor(modelItem => item.TesterUser.LastName)</td>
                            <td>@Html.DisplayFor(modelItem => item.Status)</td>
                            <td>@if (item.Status == "Queued")
                            {<button type='submit' class='btn btn-danger' asp-action="Remove" asp-route-id="@item.BatchId">Remove from Queue</button>}
                            else if (item.Status == "Complete")
                            {<button type="submit" class='btn btn-info' asp-action="Details" asp-route-id="@item.BatchId">View Results</button> <button type='submit' class='btn btn-danger' asp-action="Remove" asp-route-id="@item.BatchId">Remove</button>}
                                </td>
                        @Html.Raw("</tr>")
                    }
                }
            </tbody>
        </table>
    </form>
</div>